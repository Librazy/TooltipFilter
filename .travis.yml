language: java
jdk:
- oraclejdk8
before_deploy:
  - git config --global user.email "builds@travis-ci.com"
  - git config --global user.name "Travis CI"
  - export GIT_TAG=TooltipFilter-$TRAVIS_BRANCH-v0.1.0.${TRAVIS_BUILD_NUMBER}
  - git tag $GIT_TAG -a -m "Generated tag from TravisCI for build $TRAVIS_BUILD_NUMBER"
  - git push -q https://$GITHUB_KEY@github.com/Librazy/TooltipFilter --follow-tags  > /dev/null 2>&1
deploy:
  provider: releases
  api_key:
    secure: XPeabLkxWnqOhYpXnYlcykKOQhcXmTE3cKZwsUJUDJSLa26YwoSznSeqX0htEZAgkkvmJ+M7oZog7RcwQzVj/Jx+VrlEmiFe9A3a58AHLPtuwB245dc0GH3BajcvEE/ky8glKPaCGufjF6CDsB3c7O/gjLkwtrP7MipZbLyPA79PqtXfmbqIx+tvIwKVBN1gUAm9zrPIkiT2vqsBW3Mz3ZdGqgMKOmjMTqqUzX7XqLUTvhXrkCIr6E+xhlhdZsDLRtq9vFsteiALmgSlHJMAJzIBUm8broiaz6yVY+Hz/uXKXZa2E4xCMXSWq4oM388Av6qyvWymOe3ATReaVYxsB7cw98lw3v06PuMH2nQpFSOeMxQgDC25opHPpQL83uf6lXJYWRW9/dM332NVUJfCm28/RNmZf6VrGwtPwN39Ll0qCs0pQxssfbk9sotbVqbgXaOe5mL/2+nA+P5TxQ8j9rarxxORBcA/5GpwBbgnxZ2b8O4v5EGVzEdknsmSO9qrmPqif08Q5lZ6YhsgWesuyIbQHUQZcsbOwpQKXzBu8iCq6V713Ud86ZWCfDbEG3tD6lYPa33YVKqZyAMVPxwRM3OTkhA6Zg01MuJVrCNiJRYDpQ//xngFAnF/TRQk29mz+lx9MwpR8HYj+v6UqorJbPLC94Wqn2wxgpoNTufzjmk=
  file:
  - build/libs/TooltipFilter-1.11.2-0.1.0.${TRAVIS_BUILD_NUMBER}.jar
  on:
    repo: Librazy/TooltipFilter
    tags: false
    all_branches: true
  skip_cleanup: true
  prerelease: true
branches:
  except:
  - "/^TooltipFilter.*-v[0-9]/"
before_install:
 - chmod +x gradlew
install: ./gradlew SetupCIWorkspace
script: ./gradlew build
before_cache:
 - rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/